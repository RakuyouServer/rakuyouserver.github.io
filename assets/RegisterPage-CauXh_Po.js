import{d as k,a0 as U,o as z,e as l,r as f,R as q,c as A,a as P,w as a,b as D,S as E,g as s,U as u,V as L,W as N,Y as S,X as b,a1 as H,$ as x,_ as I}from"./index-C1QPqyz8.js";import{F as K,_ as $,A as M,L as y,K as T}from"./LockOutlined-D94Dx3M0.js";const W={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},X=k({name:"EmailOutlined",render:function(p,i){return z(),U("svg",W,i[0]||(i[0]=[l("path",{d:"M22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6zm-2 0l-8 5l-8-5h16zm0 12H4V8l8 5l8-5v10z",fill:"currentColor"},null,-1)]))}}),Y=_=>({username:[{required:!0,message:"请输入用户名"},{min:3,message:"用户名至少需要3个字符"}],password:[{required:!0,message:"请输入密码"},{min:6,message:"密码长度不能少于6个字符"}],passwordRepeat:[{required:!0,message:"请确认密码"},{validator:(p,i)=>i!==_.password?Promise.reject("两次输入的密码不一致"):Promise.resolve()}],email:[{required:!0,message:"请输入邮箱"},{type:"email",message:"邮箱格式不正确"}]}),G=()=>({username:!1,password:!1,passwordRepeat:!1,email:!1}),J=k({__name:"RegisterPage",setup(_){const p=E(),i=f(),r=q({username:"",password:"",passwordRepeat:"",email:""}),v=Y(r),w=f(G()),F=(t,e)=>{w.value[t]=e},V=A(()=>Object.entries(w.value).filter(([t])=>v[t].length>0).every(([,t])=>t)),g=f(!1),B=async t=>{var e;try{g.value=!0;const{passwordRepeat:d,...o}=t,m=await H({username:o.username,password:o.password,email:o.email});x.success(m),await p.push({name:"login-page"})}catch(d){(e=i.value)==null||e.resetFields(["password","passwordRepeat"]),x.error(`注册失败：${d.response.data}`)}finally{g.value=!1}},j=t=>{console.log(t)},C=()=>{p.push({name:"login-page"})};return(t,e)=>{const d=L,o=$,m=N,R=S,c=D,O=K;return z(),P(c,{class:"register",vertical:"",justify:"center",align:"center",gap:18},{default:a(()=>[e[12]||(e[12]=l("div",{class:"register__title-group"},[l("div",{class:"register__title"},"注册"),l("div",{class:"register__subtitle"},"欢迎来到Raku Anime")],-1)),s(O,{class:"register__form",ref_key:"formRef",ref:i,"scroll-to-first-error":"",model:r,rules:u(v),onValidate:F,onFinish:B,onFinishFailed:j},{default:a(()=>[s(o,{class:"register__form-item",name:"username"},{default:a(()=>[e[4]||(e[4]=l("div",{class:"register__label"},"用户名：",-1)),s(d,{value:r.username,"onUpdate:value":e[0]||(e[0]=n=>r.username=n),size:"large",placeholder:"请输入用户名","allow-clear":""},{prefix:a(()=>[s(u(M),{class:"register__icon"})]),_:1},8,["value"])]),_:1}),s(o,{class:"register__form-item",name:"password"},{default:a(()=>[e[5]||(e[5]=l("div",{class:"register__label"},"密码：",-1)),s(m,{value:r.password,"onUpdate:value":e[1]||(e[1]=n=>r.password=n),size:"large",type:"password",placeholder:"请输入密码","allow-clear":""},{prefix:a(()=>[s(u(y),{class:"register__icon"})]),_:1},8,["value"])]),_:1}),s(o,{class:"register__form-item",name:"passwordRepeat"},{default:a(()=>[e[6]||(e[6]=l("div",{class:"register__label"},"确认密码：",-1)),s(m,{value:r.passwordRepeat,"onUpdate:value":e[2]||(e[2]=n=>r.passwordRepeat=n),size:"large",type:"password",placeholder:"请再次输入密码","allow-clear":""},{prefix:a(()=>[s(u(y),{class:"register__icon"})]),_:1},8,["value"])]),_:1}),s(o,{class:"register__form-item",name:"email"},{default:a(()=>[e[7]||(e[7]=l("div",{class:"register__label"},"邮箱：",-1)),s(d,{value:r.email,"onUpdate:value":e[3]||(e[3]=n=>r.email=n),size:"large",placeholder:"请输入邮箱","allow-clear":""},{prefix:a(()=>[s(u(X),{class:"register__icon"})]),_:1},8,["value"])]),_:1}),e[11]||(e[11]=l("div",{class:"register__spacer"},null,-1)),s(o,{class:"register__form-item"},{default:a(()=>[s(R,{class:"register__submit",size:"large",type:"primary","html-type":"submit",disabled:!V.value,loading:g.value},{default:a(()=>e[8]||(e[8]=[b(" 注册 ")])),_:1},8,["disabled","loading"])]),_:1}),s(c,{class:"register__login-link",justify:"flex-end",align:"center",gap:"6"},{default:a(()=>[e[10]||(e[10]=l("div",null,"已有账号？",-1)),s(R,{type:"link",size:"small",onClick:C,class:"register__login-button-link"},{default:a(()=>[s(c,{justify:"center",gap:2,class:"register__login-button-content"},{default:a(()=>[e[9]||(e[9]=b(" 立即登录 ")),s(u(T),{class:"register__login-icon"})]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})}}}),h=I(J,[["__scopeId","data-v-661340c6"]]);export{h as default};
